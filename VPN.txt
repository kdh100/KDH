1. IPSec : VPN 과 같은 Tunneling Protocol, 전송(Transport)/터널(Tunnel) 모드 지원
    - IKE(Internet Key Exchange) : 인증키 공유/생성 프로토콜
        # isakmp 
2. Site-to-Site 설정(VPN 네트워크로 설정할 양측 라우터에 동일하게 설정)
    1) isakmp(IKE) 정책 설정
        # crypto isakmp policy 100  \\ 정책 생성
           encription aes 256  \\ 대칭키 암호화 알고리즘 지정
           hash md5  \\ 공유된 인증키의 무결성 체크를 위한 해시 함수 알고리즘 지정
           authentication pre-share  \\ 인증키 공유 방식
           group 5  \\ 인증키 교환 알고리즘(diffie-hellman) 레벨 지정
           lifetime 36000  \\ SA(Security Association; 보안연결성) 시간 지정
    2) isakmp 인증키 설정
        # crypto isakmp key soldesk address (키를 공유할 Peer IP 입력)
    3) VPN 네트워크 정의
        # ip access-list extended VPN-NETWORK
           permit ip (Peer 측 네트워크 + wildcard) (Server 측 네트워크 + wildcard)
    4) ipsec 보안 정책 설정
        # crypto ipsec transform-set VPNTSET esp-aes esp-md5-hmac
          \\ 패킷 암호 및 암호화(Encapsuled) 데이터의 무결성 체크를 위한 해시 알고리즘
    5) VPN MAP 생성
        # crypto map VPNMAP 10 ipsec-isakmp
           set peer (Peer IP)
           set transform-set VPNTSET
           match address VPN-NETWORK
    6) VPN MAP 인터페이스 적용
        # interface fa0/0
           crypto map VPNMAP
        # Remote Access SSL(EasyVPN) 설정(원격 접근을 위해 AAA, 계정 필요)
3. Cisco EasyVPN 설정(IPSec VPN)
    <서버>
    1) AAA 구성
        # aaa new-model  \\ AAA 활성화
          aaa authentication login EV-USER local
          \\ AAA 인증을 로컬에서 'EV-USER' 리스트로 진행
          aaa authorization network EV-GROUP local
          \\ AAA 인증을 통한 권한 관리를 로컬에서 'EV-GROUP' 리스트로 진행
    2) 계정 생성
        # username root password toor
    3) isakmp(IKE) 정책 설정
        # crypto isakmp policy 200
           authentication pre-share
           group 5  \\ EasyVPN 구성 시 DH 그룹 레벨은 2 이상부터 적용 가능
    4) 클라이언트에서 사용할 IP 대역 정의(+해당 IP 대역 트래픽 보호 목적)
        # ip access-list extended EV-NETWORK
           permit ip (서버 IP 대역) any(설정값을 전달해 줄 IP 대역이 정해지지 않아서)
    5) 사용자 측에서 사용될 정책 설정
        # ip local pool EV-Pool (원격지 IP 중 제공할 수 있는 IP 대역; DHCP 처럼)
        # crypto isakmp client configuration group LINUX
           key gnu
           dns 168.126.63.1
           acl EV-NETWORK
           pool EV-POOL
    6) ipsec 보안 정책 설정
        # crypto ipsec transform-set EVSET esp-aes esp-md5-hmac
          \\ IPSec 모드 중 터널 모드만 적용 가능하지만 기본값이므로 생략
    7) Dynamic VPN MAP(다중 클라이언트를 위한 범용 VPN MAP) 생성
        # crypto dynamic-map EVDMAP 10
           set transform-set EVSET
           reverse-route  \\ 사용자 측에 자동으로 라우팅 테이블을 추가(Injection)시킴
    8) Static VPN MAP 생성
        # crypto map EVSMAP client authentication list EV-USER
          crypto map EVSMAP client configuration address respond
          \\ 사용자로부터 IP 사용 요청에 대하여 응답
          crypto map EVSMAP isakmp authorization list EV-GROUP
          \\ IKE 을 통한 권한 내역을 AAA 의 EV-GROUP 을 통해 관리
          crypto map EVSMAP 10 ipsec-isakmp dynamic EVDMAP
          \\ 동적 VPN MAP 연동을 통한 정보 확인으로 SA 연결성 확인 가능
    9) Static VPN MAP 인터페이스 적용
        # interface fa0/0
           crypto map EVSMAP
    <클라이언트>
    1) ipsec 보안 정책 구성
        # crypto ipsec client EZVPN EV-TUNNEL  \\ 클라이언트 정책 생성과 터널 이름 설정
           connect auto  \\ 인증 시 자동 접속
           group LINUX key gnu  \\ 서버쪽에 설정되어있던 사용자 설정값(그룹, 키값) 설정
           mode network-extension  \\ ??
           peer (서버향 Peer IP)
    2) ipsec 정책 인터페이스 적용
        # interface fa0/1
           crypto ipsec client EZVPN EV-TUNNEL inside  \\ 내부 IP 대역으로 ingress
        # interface fa0/0
           crypto ipsec client EZVPN EV-TUNNEL  \\ 외부 IP 대역으로 egress
    3) 사용자 인증
        # crypto ipsec client EZVPN xauth  \\ XAuth 방식의 인증을 통해 사용자 권한 부여
          Username : root
          Password : toor
4. Remote Access with SSL 설정
    * 각 네트워크의 라우터는 내부/외부 NAT 설정이 되어있고 인터넷에 연결되어있음
    1) AAA 구성
        # aaa new-model
          aaa authentication login uservpn local
          aaa authorization network groupvpn local
    2) 계정 생성
        # username root password centos
    3) isakmp(IKE) 정책 설정
        # crypto isakmp policy 100
           authentication pre-share
           encription aes 256
           hash sha
           group 5
    4) 사용자 측에서 사용될 정책 설정
        # ip local pool poolvpn (IP address pool; DHCP)
        # crypto isakmp client configuration group groupvpn
           key linux
           pool poolvpn
    5) ipsec 보안 정책 설정
        # crypto ipsec transform-set setvpn esp-aes esp-md5-hmac
    6) Dynamic VPN MAP 생성
        # crypto dynamic-map dmap 10
           set transform-set setvpn
           reverse-route
    7) Static VPN MAP 생성
        # crypto map smap client authentication list uservpn
          crypto map smap client configuration address respond
          crypto map smap isakmp authorization list groupvpn
          crypto map smap 20 ipsec-isakmp dynamic dmap
    8) Static VPN MAP 인터페이스 적용
        # interface fa0/0
           crypto map smap
    9) 사용자가 VPN 클라이언트로 사전에 설정된 그룹,계정정보와 VPN 서버 IP 입력하여 터널링 시도